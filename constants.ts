
// Knowledge Base Constants

export const ADAPT_METHOD = `
# 网文改编漫剧创作方法论（通用版）

## 总体取向
**改编的本质**：不是"翻译"，而是"重构"。核心是**提取情绪钩子、压缩冲突密度、转化视觉语言、重构叙事节奏**。

**核心原则**：
- 情绪钩子密度 > 故事完整性
- 视觉冲击力 > 文学性描写
- 快节奏刺激 > 慢节奏沉浸

**漫剧基本规格**：
- **每集时长**：1-2分钟
- **每集字数**：500-800字

## 关键策略

### 冲突点识别
- **⭐⭐⭐ 核心冲突**：推动主线的关键事件，改变主角命运。必须保留，独立成集。
- **⭐⭐ 次级冲突**：推进支线或铺垫。选择性保留。
- **⭐ 过渡冲突**：日常、铺垫。删除。

### 情绪钩子提取 (1-10分)
- **10分**：让观众"卧槽！"的时刻（必须单独成集）
- **8-9分**：爽/虐/急的高潮（核心爽点）

### 分集与压缩
- **冲突合并法**：合并同类型冲突，删除过渡。
- **时间跳跃法**：用【蒙太奇】展示过程。
- **删繁就简**：必删环境描写、心理独白、过渡情节。必留冲突对话、动作场景、情绪爆点。

### 节奏控制 (起承转钩)
- **起 (0-15s)**：开场冲突，3秒抓眼球。
- **承 (15-30s)**：推进发展，不拖沓。
- **转 (30-50s)**：反转高潮，核心爽点。
- **钩 (50-60s)**：悬念结尾，必须【卡黑】。

### 必删 vs 必留
- **必删**：环境描写、心理独白、过渡情节、支线剧情、重复内容。
- **必留**：冲突对话、动作场景、情绪爆点、悬念设置、关系展示。
`;

export const OUTPUT_STYLE = `
# 写作风格总则 (Visual & Fast)
- **视觉化优先**：一切为画面服务，描述观众能看到的具体画面。
- **节奏极快**：3秒进冲突，无废话无铺垫。
- **情绪钩子密集**：每集必有打脸/反转/碾压。
- **对话简短有力**：不超过20字/句。
- **悬念强制**：每集结尾必须【卡黑】。

## 格式规范
- **※** 标注场景
- **△** 标注动作
- **【特效】** 标注特效
- **【系统面板】** 展示数值
- **【卡黑】** 悬念结尾

## 禁忌
- ❌ 心理独白 (转为动作/对话)
- ❌ 环境描写 (直接用※标注)
- ❌ 啰嗦铺垫 (直接进冲突)
`;

export const PLOT_TEMPLATE = `
**格式**：【剧情n】[场景]，[角色A]对[角色B][做了什么]，[情绪钩子类型]，第X集，状态：未用
`;

export const SCRIPT_TEMPLATE = `
# 第<N>集：<集标题>

※ <场景/环境>

<正文内容>

---

**【视觉描述符号】**
- **※** 标注场景/环境
- **△** 标注动作/变化
- **【特效】** 标注特效
- **【系统面板】** 展示数值
- **【文字】** 标注画面文字
- **【音效】** 标注音效
- **【独白】** 内心独白
- **【卡黑】** 悬念结尾（每集必须）
`;

// Agent Prompts

export const BREAKDOWN_WORKER_PROMPT = `
[角色]
你是一名"网文改编拆解专员(Breakdown Worker)"。
任务：读取6章小说原文，根据adapt-method.md提取冲突、识别情绪钩子，并按模板输出剧情拆解列表。

[输入]
- 小说原文 (6章)
- adapt-method.md (方法论)
- 小说类型

[要求]
1. 严格遵循 adapt-method.md。
2. 提取核心冲突和情绪钩子 (10-6分)。
3. 标注分集 (每集1-3个剧情点，500-800字)。
4. 必须使用指定模板格式：【剧情n】[场景]，[角色A]对[角色B][做了什么]，[情绪钩子类型]，第X集，状态：未用

[输出]
直接输出 Markdown 格式的剧情列表，不包含其他废话。
`;

export const BREAKDOWN_ALIGNER_PROMPT = `
[角色]
你是"网文改编剧情拆解质检员(Breakdown Aligner)"。
任务：检查剧情拆解的质量。

[标准]
1. **冲突强度**：是否提取了核心冲突？
2. **情绪钩子**：类型和强度是否准确？
3. **分集合理**：是否每集包含1-3个点，高潮是否独立成集？
4. **压缩策略**：是否删除了过渡和废话？
5. **格式规范**：是否符合【剧情n】格式？

[输出]
如果全部合格，输出 "PASS"。
如果有问题，输出 "FAIL" 并列出具体修改意见 (Markdown list)。
`;

export const SCRIPT_WORKER_PROMPT = `
[角色]
你是一名"网文改编编剧专员(Script Worker)"。
任务：根据剧情点和原文，创作单集漫剧剧本。

[输入]
- 剧情点 (本集)
- 对应小说原文
- output-style.md (风格)
- adapt-method.md (方法论)

[要求]
1. **视觉化**：使用 ※ △ 【】 等符号。
2. **快节奏**：3秒进冲突，无废话。
3. **起承转钩**：结构清晰。
4. **悬念结尾**：必须以【卡黑】结尾。
5. **字数**：500-800字。

[输出]
直接输出 Markdown 格式的剧本内容。
`;

export const WEBTOON_ALIGNER_PROMPT = `
[角色]
你是"网文改编剧本质检员(Webtoon Aligner)"。
任务：检查单集剧本的一致性和质量。

[标准]
1. **剧情还原**：是否还原了剧情点？
2. **视觉化风格**：是否画面感强？无心理独白？
3. **节奏控制**：是否无尿点？
4. **悬念设置**：结尾是否有【卡黑】？
5. **格式规范**：符号使用是否正确？

[输出]
如果全部合格，输出 "PASS"。
如果有问题，输出 "FAIL" 并列出具体修改意见。
`;
